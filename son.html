<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Manita Calendar ü•¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&family=Poppins:wght@300;400;500&display=swap"
    rel="stylesheet"
  />

  <style>
      :root {
      --bg-top: #0f0f15;
      --bg-bottom: #1a1a26;
      --card-bg: #14121c;
      --card-border: rgba(255, 255, 255, 0.16);
      --accent: #f28b82;
      --accent-soft: #ffc7b7;
      --text-main: #f3f0ff;
      --text-soft: #b3aec9;
    }
      
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body::before {
  content: "";
  position: fixed;
  top: -600px;
  left: -300px;
  width: calc(100% + 600px);
  height: calc(100% + 1200px);
  z-index: -1;
  pointer-events: none;
  
  background-image: url("data:image/svg+xml;utf8,\
    <svg xmlns='http://www.w3.org/2000/svg' width='140' height='140'>\
      <text x='10' y='50' font-size='38' opacity='0.40'>ü•¨</text>\
      <text x='90' y='120' font-size='34' opacity='0.40'>‚ù§Ô∏è</text>\
    </svg>");
  background-repeat: repeat;
  background-size: 160px 160px;

  opacity: 0.25;
  animation: driftSmooth 110s linear infinite;
  will-change: transform;
}


    @keyframes driftSmooth {
      0%   { transform: translate3d(0, 0, 0); }
      50%  { transform: translate3d(-220px, -160px, 0); }
      100% { transform: translate3d(0, -320px, 0); }
    }

    body {
      font-family: "Poppins", sans-serif;
      font-weight: 400;
      background: linear-gradient(180deg, #0f0f15 0%, #1a1a26 100%);
      background-repeat: no-repeat;
      background-size: cover;
      min-height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      color: #f3f0ff;
      position: relative;
      overflow-x: hidden;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: var(--card-bg);
      border-radius: 24px;
      padding: 24px 22px 20px;
      position: relative;
      overflow: hidden;
      box-shadow:
        0 0 20px rgba(255, 200, 230, 0.15),
        0 18px 50px rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .card.anniversary {
      box-shadow: 0 0 40px rgba(255, 192, 203, 0.35);
      border-color: rgba(255, 200, 230, 0.6);
    }

    .card-header {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
      z-index: 1;
    }

    .title-block {
      max-width: 70%;
    }

    .title-block h1 {
      font-family: "Dancing Script", cursive;
      font-size: 2rem;
      font-weight: 600;
      letter-spacing: 0;
      color: #ffffff;
    }

    .title-block p {
      margin-top: 4px;
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .day-counter {
      margin-top: 4px;
      font-size: 0.8rem;
      color: var(--accent-soft);
    }

    /* K√º√ß√ºk yuvarlak ‚ÄúBug√ºn 12/12‚Äù baloncuƒüu ‚Äì g√∂r√ºnmesin diye kapattƒ±m */
    .day-pill {
      display: none;
    }

    .day-pill span:first-child {
      font-weight: 600;
      color: var(--accent-soft);
    }

    .music-bar {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .music-bar button {
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(0, 0, 0, 0.4);
      color: var(--text-main);
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 0.75rem;
      cursor: pointer;
    }

    .music-bar button:hover {
      background: rgba(255, 255, 255, 0.06);
    }

    .music-bar .music-title {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .music-bar input[type="range"] {
      width: 70px;
    }

    .status {
      position: relative;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.18);
      font-size: 0.85rem;
      color: var(--text-soft);
      margin-bottom: 12px;
      z-index: 1;
      
    }

    .note {
      position: relative;
      padding: 14px 0 12px;
      min-height: 90px;
      z-index: 1;
    }

    .note-title {
      font-family: "Dancing Script", cursive;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 6px;
      color: #ffffff;
    }

    .note-text {
      font-size: 0.95rem;
      line-height: 1.6;
      color: var(--text-main);
      white-space: pre-line;
    }

    .photos {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .photo {
      position: relative;
      width: calc(50% - 5px);
      aspect-ratio: 4 / 5;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: #1f1c2b;
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.6);
    }

    .photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.02);
    }

    .hint {
      margin-top: 10px;
      font-size: 0.78rem;
      color: var(--text-soft);
      opacity: 0.95;
    }

    .footer {
      margin-top: 16px;
      font-size: 0.75rem;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      opacity: 0.9;
      z-index: 1;
    }

     #status {
      display: none !important;
    }


    .footer span {
      white-space: nowrap;
    }

    .calendar-wrapper {
      position: fixed; /* istersen absolute da olur */
      left: calc(50% + 280px); /* kartƒ±n saƒüƒ±nda bo≈üluk bƒ±rakƒ±r */
      top: 50%;
      transform: translateY(-50%);
      z-index: 2;
    }


    .calendar-box {
      background: rgba(20, 18, 28, 0.92);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow:
        0 0 20px rgba(255, 200, 230, 0.15),
        0 10px 40px rgba(0, 0, 0, 0.55);
      border-radius: 20px;
      padding: 14px 18px;
      color: var(--text-main);
      font-size: 0.8rem;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 10px;
    }

    .calendar-month {
      font-weight: 500;
      letter-spacing: 0.03em;
    }

    .calendar-counter {
      color: var(--accent-soft);
      white-space: nowrap;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      font-size: 0.72rem;
      text-align: center;
    }

    .calendar-weekday {
      color: var(--text-soft);
      opacity: 0.9;
    }

    .calendar-day {
      padding: 4px 0;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.25);
      color: var(--text-main);
    }

    .calendar-day.empty {
      background: transparent;
    }

    .calendar-day.today {
      background: linear-gradient(135deg, #f28b82, #ffc7b7);
      color: #1a1a26;
      font-weight: 600;
    }

    .quiz {
      margin-bottom: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.18);
      font-size: 0.85rem;
      color: var(--text-main);
    }

    .quiz-text {
      margin-bottom: 4px;
      color: var(--text-soft);
    }

    .quiz-question {
      margin-bottom: 8px;
      font-weight: 500;
    }

    .quiz-input-row {
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
    }

    .quiz-input-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      background: rgba(0, 0, 0, 0.4);
      padding: 6px 10px;
      color: var(--text-main);
      font-size: 0.8rem;
    }

    .quiz-input-row input::placeholder {
      color: var(--text-soft);
    }

    .quiz-input-row button {
      border-radius: 999px;
      border: none;
      padding: 6px 14px;
      font-size: 0.8rem;
      cursor: pointer;
      background: var(--accent);
      color: #fff;
    }

    .quiz-input-row button:hover {
      filter: brightness(1.05);
    }

    .quiz-feedback {
      min-height: 1em;
      font-size: 0.8rem;
      color: var(--accent-soft);
    }

    .status select {
      width: 100%;
      background-color: rgba(0, 0, 0, 0.45);
      color: var(--text-main);
      border: 1px solid rgba(255, 255, 255, 0.25);
      border-radius: 10px;
      padding: 6px 10px;
      outline: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      margin-left: 4px;
    }

    .status select option {
      background-color: #151520;
      color: var(--text-main);
    }

    @media (max-width: 480px) {
      body {
        align-items: flex-start;
        justify-content: flex-start;
        padding: 22px 14px;
      }

      .card {
        border-radius: 22px;
        margin-top: 26px;
        margin-bottom: 36px;
      }

      .card-header {
        margin-bottom: 18px;
      }

      .title-block h1 {
        font-size: 1.8rem;
      }

      .title-block p {
        font-size: 0.85rem;
      }

      .note-text {
        font-size: 0.92rem;
      }

      .photos {
        flex-direction: column;
        margin-top: 14px;
      }

      .photo {
        width: 100%;
        max-width: 260px;
        margin-inline: auto;
      }

      .footer {
        margin-top: 24px;
      }

      .calendar-wrapper {
        display: none; /* mobile'de takvimi gizle istersen */
      }
   
  </style>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
</head>
<body>
  <!-- Kart (ortada) -->
  <main class="card">
    <header class="card-header">
      <div class="title-block">
        <h1>Manita Calendar ü•¨</h1>
        <p>Her g√ºn yeni bir not mu? √á√ú√ú√ú≈û≈û. üòú</p>
        <p class="day-counter" id="day-counter"></p>
      </div>
      <div class="day-pill" id="day-pill">
        <span>‚Äì</span>
        <span>‚Äì</span>
      </div>
    </header>

    <div class="music-bar">
      <button id="music-toggle" type="button">‚ñ∂</button>
      <span class="music-title">Yalƒ±n ‚Äì Sensiz Olmaz</span>
      <input id="music-volume" type="range" min="0" max="1" step="0.05" value="0.2" />
    </div>

    <div class="status" id="status"></div>

    <div class="quiz" id="quiz-area" hidden>
      <p class="quiz-text">
        Bug√ºn√ºn notunu g√∂rebilmek i√ßin √∂nce ≈üu soruyu cevapla: üí°
      </p>
      <p class="quiz-question" id="quiz-question"></p>
      <div class="quiz-input-row">
        <input
          type="text"
          id="quiz-answer"
          placeholder="Cevabƒ±nƒ± buraya yaz..."
          autocomplete="off"
        />
        <button type="button" id="quiz-submit">G√∂ster</button>
      </div>
      <p class="quiz-feedback" id="quiz-feedback"></p>
    </div>

    <section class="note" id="note-section" hidden>
      <h2 class="note-title" id="note-title"></h2>
      <p class="note-text" id="note-text"></p>

      <div class="photos" id="photos"></div>

      <div class="hint">
        Bu sayfada sadece bug√ºn√ºn notunu g√∂rebilirsin.
        D√ºn ve yarƒ±n hala sƒ±r olarak kalsƒ±n. ‚ú®
      </div>
    </section>

    <footer class="footer">
      <span id="range-text"></span>
      <span>ü§ç</span>
    </footer>
  </main>

  <!-- Takvim (saƒüda) -->
  <section class="calendar-wrapper">
    <div id="calendar-root"></div>
  </section>

  <!-- M√ºzik ve konfeti sesleri -->
  <audio id="bg-music" loop>
    <source src="sensiz-olmaz.mp3" type="audio/mpeg" />
  </audio>

  <audio id="confetti-sound">
    <source src="confetti.mp3" type="audio/mpeg" />
  </audio>

  <script>
    const SEASON_YEAR = 2025;
    const RELATION_START = new Date(2025, 4, 12);

    const entries = {
      "2025-11-30": {
        title: "G√ºn 1 ‚Äì Ba≈ülangƒ±√ß",
        text: "Bu minik takvimin ilk sayfasƒ±‚Ä¶ Bundan sonra her g√ºne senden bana, benden sana minicik bir not var. üíå",
        photos: ["images/1.png"],
        quiz: {
          question: "Bu takvimi hangi ay i√ßin hazƒ±rladƒ±m? (cevap: aralƒ±k)",
          answers: ["aralƒ±k", "aralik", "aralƒ±k ayƒ±", "aralik ayi"]
        }
      },
      "2025-12-01": {
        title: "G√ºn 2",
        text: "Bug√ºn sadece ≈üunu bil istiyorum: Varlƒ±ƒüƒ±n her ≈üeyi daha yumu≈üak yapƒ±yor. üí´",
        photos: [],
        quiz: {
          question: "Bug√ºn bu takvimin ka√ßƒ±ncƒ± g√ºn√º? (sayƒ±yla yaz)",
          answers: ["2", "02", "ikinci", "iki"]
        }
      },
      "2025-12-02": {
        title: "G√ºn 3",
        text: "Bazen g√ºn i√ßinde aklƒ±ma gelip g√ºl√ºms√ºyorsun, farkƒ±nda bile olmuyorsun. üòä",
        photos: [],
        quiz: {
          question: "ƒ∞kimizin olduƒüu en az ka√ß ki≈üi var? (sen + ben = ?)",
          answers: ["2", "iki"]
        }
      },
      "2025-12-03": {
        title: "G√ºn 4",
        text: "Bug√ºn kendine biraz nazik ol. Ben zaten sana fazlasƒ±yla nazik davranƒ±yorum. üíï",
        photos: [],
        quiz: {
          question: "Bu takvimin bug√ºnk√º sayfa numarasƒ± ka√ß? (cevap: 3 yaz)",
          answers: ["3", "03", "√º√ß", "uc"]
        }
      },
      "2025-12-04": {
        title: "G√ºn 5",
        text: "Belki yan yana deƒüiliz ama kalbim hep sende, bunu unutma. üß∑",
        photos: [],
        quiz: {
          question: "Bug√ºn√ºn tarihindeki ay hangisi? (cevap: aralƒ±k)",
          answers: ["aralƒ±k", "aralik", "aralƒ±k ayƒ±", "aralik ayi"]
        }
      },
      "2025-12-05": {
        title: "G√ºn 6",
        text: "Bug√ºn kendine minik bir kahve/√ßay ƒ±smarla benden say. ‚òï",
        photos: [],
        quiz: {
          question: "ƒ∞kimiz toplam ka√ß kalbe sahibiz? (cevap: 2)",
          answers: ["2", "iki"]
        }
      },
      "2025-12-06": {
        title: "G√ºn 7",
        text: "D√ºnyanƒ±n en b√ºy√ºk l√ºks√º: G√ºn√ºn i√ßinde aklƒ±na gelen birinin seni de d√º≈ü√ºnmesi. ‚ú®",
        photos: [],
        quiz: {
          question: "Haftanƒ±n ka√ßƒ±ncƒ± g√ºn√º genelde dinlenme modunda olur? (cevap: 7 yaz)",
          answers: ["7", "07", "yedi"]
        }
      },
      "2025-12-07": {
        title: "G√ºn 8",
        text: "Bazƒ± g√ºnler yorulursun, bazƒ± g√ºnler de sadece benimle sa√ßma sapan g√ºlersin. ƒ∞kisi de g√ºzel. üí´",
        photos: [],
        quiz: {
          question: "Bu takvimde bug√ºn ka√ßƒ±ncƒ± g√ºndeyiz? (cevap: 8)",
          answers: ["8", "08", "sekiz"]
        }
      },
      "2025-12-08": {
        title: "G√ºn 9",
        text: "Aklƒ±na geldiƒüimde g√ºl√ºms√ºyorsan, bu takvim amacƒ±na ≈üimdiden ula≈ütƒ± demektir. üôÇ",
        photos: [],
        quiz: {
          question: "Ka√ß harften olu≈üuyor: 'A≈ûK'? (cevap: 3)",
          answers: ["3", "√º√ß", "uc"]
        }
      },
      "2025-12-09": {
        title: "G√ºn 10",
        text: "Bug√ºnk√º minik g√∂rev: En az bir kere aynaya bakƒ±p 'fena da deƒüilim ya' de. üòå",
        photos: [],
        quiz: {
          question: "Bug√ºn tarih g√ºn kƒ±smƒ±nda hangi sayƒ± yazƒ±yor? (cevap: 9 yaz)",
          answers: ["9", "09", "dokuz"]
        }
      },
      "2025-12-10": {
        title: "G√ºn 11",
        text: "Bazen hi√ßbir ≈üey yapmasak bile, 'var olman' ba≈ülƒ± ba≈üƒ±na yeterli geliyor. üåô",
        photos: [],
        quiz: {
          question: "ƒ∞kimizin toplam ka√ß g√∂z√º var? (cevap: 4)",
          answers: ["4", "d√∂rt", "dort"]
        }
      },
      "2025-12-11": {
        title: "G√ºn 12‚Äôye Bir Kala",
        text: "Yarƒ±n bizim i√ßin biraz daha √∂zel bir g√ºn‚Ä¶ Bug√ºn√º sakin ge√ßir, yarƒ±n ekstra kalpli. üíû",
        photos: [],
        quiz: {
          question: "Yarƒ±n hangi g√ºne ge√ßiyoruz? (cevap: 12 yaz)",
          answers: ["12", "on iki", "oniki"]
        }
      },
      "2025-12-12": {
        title: "Ayd√∂n√ºm√ºm√ºz üíû",
        text: "Ayd√∂n√ºm√ºm√ºz kutlu olsun. ƒ∞yi ki varsƒ±n, iyi ki o g√ºn hayatƒ±ma karƒ±≈ütƒ±n. Bug√ºn√ºn sayfasƒ± seni ekstra √ßok seviyor. üíå",
        photos: ["images/aydonumu.png"],
        quiz: {
          question: "Ayd√∂n√ºm√ºm√ºz hangi g√ºn? (√∂rnek: 12 aralƒ±k)",
          answers: [
            "12 aralƒ±k",
            "12 aralik",
            "12.12",
            "12/12",
            "12 12",
            "12 aralƒ±k 2025",
            "12 aralik 2025"
          ]
        },
        isAnniversary: true
      },
      "2025-12-13": {
        title: "G√ºn 14",
        text: "D√ºn ayd√∂n√ºm√ºyd√º ama ben her g√ºn√º 'iyi ki' diyerek ge√ßiriyorum aslƒ±nda. üéÇ",
        photos: [],
        quiz: {
          question: "Ayd√∂n√ºm√ºm√ºz√º bir g√ºn √∂nce kutladƒ±k mƒ±? (cevap: evet)",
          answers: ["evet", "EVET", "Evet"]
        }
      },
      "2025-12-14": {
        title: "G√ºn 15",
        text: "Bug√ºn sƒ±radan bir g√ºn gibi g√∂r√ºnse de, i√ßinde sen olduƒüun i√ßin otomatik olarak g√ºzel. üå∏",
        photos: [],
        quiz: {
          question: "Bu k√º√ß√ºk takvim hangi mevsimde? (cevap: kƒ±≈ü)",
          answers: ["kƒ±≈ü", "kis", "kƒ±≈ü mevsimi", "kis mevsimi"]
        }
      },
      "2025-12-15": {
        title: "G√ºn 16",
        text: "Bazen konu≈ümasak bile, yazmasak bile, orada olduƒüunu bilmek yetiyor. ü´∂",
        photos: [],
        quiz: {
          question: "Hangisi daha aƒüƒ±r: 'kalbim' mi 'sensiz olmak' mƒ±? (cevap: kalbim üòÑ)",
          answers: ["kalbim", "kalbƒ±m", "kalp", "kalb"]
        }
      },
      "2025-12-16": {
        title: "G√ºn 17",
        text: "Uyumadan √∂nce aklƒ±na gelen son birka√ß ≈üeyden biri olayƒ±m, o da bana yeter. üåô",
        photos: [],
        quiz: {
          question: "Bu takvimin adƒ± ne? (cevap: manita calendar)",
          answers: [
            "manita calendar",
            "manita takvimi",
            "manita kalender",
            "manita"
          ]
        }
      },
      "2025-12-17": {
        title: "G√ºn 18",
        text: "Bug√ºn seni minik bir hatƒ±rlatma ile rahatsƒ±z ediyorum: Seviliyorsun. Nokta. ü§ç",
        photos: [],
        quiz: {
          question: "ƒ∞kimiz toplam ka√ß elimize sahibiz? (cevap: 4)",
          answers: ["4", "d√∂rt", "dort"]
        }
      },
      "2025-12-18": {
        title: "G√ºn 19",
        text: "Bir g√ºn √ßok yorgun hissedersen, bu sayfayƒ± yeniden a√ßƒ±p 'benim biri var' demen i√ßin varƒ±m. üí´",
        photos: [],
        quiz: {
          question: "Sevgiye en √ßok benzeyen emoji hangisi? (cevap: ‚ù§Ô∏è veya kalp)",
          answers: ["‚ù§Ô∏è", "kalp", "kƒ±rmƒ±zƒ± kalp", "kirmizi kalp"]
        }
      },
      "2025-12-19": {
        title: "G√ºn 20",
        text: "Seninle ilgili en sevdiƒüim ≈üeylerden biri: Kendin olman. Bu kadar basit. üíõ",
        photos: [],
        quiz: {
          question: "Bu takvimi kim i√ßin hazƒ±rladƒ±m? (cevap: sen / benim i√ßin)",
          answers: ["sen", "benim i√ßin", "benim icin", "senin i√ßin", "senin icin"]
        }
      },
      "2025-12-20": {
        title: "G√ºn 21",
        text: "Bug√ºn i√ßinden gelirse bana bir tane rastgele foto at, 'bug√ºn b√∂yleyim' diye. üì∏",
        photos: [],
        quiz: {
          question: "Bug√ºn√ºn g√ºn sayƒ±sƒ± (21) √ßift mi tek mi? (cevap: tek)",
          answers: ["tek"]
        }
      },
      "2025-12-21": {
        title: "G√ºn 22",
        text: "Senle ge√ßen zaman ‚Üí hƒ±zlƒ±. Sensiz ge√ßen zaman ‚Üí yava≈ü. Ama ikisinde de i√ßimde sen varsƒ±n. ‚è≥",
        photos: [],
        quiz: {
          question: "Yine de, bu takvimde her g√ºn kimin i√ßin? (cevap: benim i√ßin, senin i√ßin)",
          answers: [
            "benim i√ßin",
            "benim icin",
            "senin i√ßin",
            "senin icin",
            "sen"
          ]
        }
      },
      "2025-12-22": {
        title: "G√ºn 23",
        text: "Bug√ºn kendini biraz yorulmu≈ü hissedersen, bu sayfayƒ± bir kahve molasƒ± gibi d√º≈ü√ºn. ‚òï",
        photos: [],
        quiz: {
          question: "Sevgi mi b√ºy√ºk, biz mi? (cevap: biz)",
          answers: ["biz", "ikimiz", "ikisiyiz", "biz ikimiz"]
        }
      },
      "2025-12-23": {
        title: "G√ºn 24",
        text: "Bir g√ºn√ºm√ºz diƒüerine benzemiyor ama ortak olduƒüumuz ≈üey: Hep kalpten kalbe bir hat var. üß∂",
        photos: [],
        quiz: {
          question: "Sence ben seni az mƒ± √ßok mu seviyorum? (cevap: √ßok)",
          answers: ["√ßok", "cok", "√ßok √ßok", "cok cok"]
        }
      },
      "2025-12-24": {
        title: "G√ºn 25",
        text: "Bug√ºn en sevdiƒüin ≈üarkƒ±lardan birini a√ß, sanki birlikte dinliyormu≈üuz gibi d√º≈ü√ºnd√ºrmek istiyorum. üéß",
        photos: [],
        quiz: {
          question: "M√ºzik dinlemek i√ßin genelde ne kullanƒ±rsƒ±n? (√∂rnek: kulaklƒ±k / telefon)",
          answers: ["kulaklƒ±k", "kulaklik", "telefon", "spotify", "youtube"]
        }
      },
      "2025-12-25": {
        title: "G√ºn 26",
        text: "Bazen 'iyi ki' demeyi bile unuturuz‚Ä¶ Bug√ºn y√ºksek sesle 'iyi ki' de l√ºtfen. ü§ç",
        photos: [],
        quiz: {
          question: "Bug√ºn g√ºnlerden ka√ß? (cevap: 25 yaz)",
          answers: ["25", "yirmi be≈ü", "yirmibes"]
        }
      },
      "2025-12-26": {
        title: "G√ºn 27",
        text: "Bu takvimin her sayfasƒ± aslƒ±nda aynƒ± ≈üeyi s√∂yl√ºyor: 'Sen deƒüerlisin.' üíå",
        photos: [],
        quiz: {
          question: "Bu c√ºmleyi tamamla: 'Sen ..........' (cevap: deƒüerlisin)",
          answers: ["deƒüerlisin", "degerlisin"]
        }
      },
      "2025-12-27": {
        title: "G√ºn 28",
        text: "Bug√ºn kendini √∂zl√ºyorsan, benden √∂nce kendine sarƒ±l. Sonra bana. ü§ó",
        photos: [],
        quiz: {
          question: "Sarƒ±lmayƒ± hangi emoji temsil ediyor? (en klasik: ü§ó ya da üíû yaz)",
          answers: ["ü§ó", "üíû", "sarƒ±lan y√ºz", "sarƒ±lma"]
        }
      },
      "2025-12-28": {
        title: "G√ºn 29",
        text: "Kafanda milyon tane d√º≈ü√ºnce varsa, i√ßlerinden sadece birini bana anlatsan bile yeter. üí≠",
        photos: [],
        quiz: {
          question: "Bug√ºn takvimin ka√ßƒ±ncƒ± g√ºn√º? (cevap: 29)",
          answers: ["29", "yirmi dokuz", "yirmidokuz"]
        }
      },
      "2025-12-29": {
        title: "G√ºn 30",
        text: "Bu sayfaya geldiysen, zaten bunca g√ºnd√ºr bizi se√ßiyorsun demektir. Te≈üekk√ºr ederim. ü´∂",
        photos: [],
        quiz: {
          question: "Bu takvimi a√ßan ki≈üi kim? (cevap: ben)",
          answers: ["ben", "benim", "benimki"]
        }
      },
      "2025-12-30": {
        title: "G√ºn 31",
        text: "Yƒ±l bitiyor ama benim i√ßin senle ilgili hisler bitmiyor, sadece ≈üekil deƒüi≈ütiriyor. üéá",
        photos: [],
        quiz: {
          question: "Yƒ±l bittiƒüinde yeni yƒ±l ka√ß olacak? (cevap: 2026)",
          answers: ["2026"]
        }
      },
      "2025-12-31": {
        title: "G√ºn 32 ‚Äì Son Ak≈üam",
        text: "Bu senenin son ak≈üamƒ±nda dileƒüim: Senin olduƒüun bir s√ºr√º yeni g√ºn. üéÜ",
        photos: ["images/yil-sonu.png"],
        quiz: {
          question: "Bu sayfayƒ± yƒ±lƒ±n en son g√ºn√º m√º a√ßtƒ±n? (cevap: evet)",
          answers: ["evet", "Evet", "EVET"]
        }
      },
      "2026-01-01": {
        title: "G√ºn 33 ‚Äì Yeni Yƒ±l üéâ",
        text: "Yeni yƒ±lƒ±n kutlu olsun. Sen olduƒüun s√ºrece, hangi yƒ±l olduƒüunun √ßok da √∂nemi yok. Ama birlikte olunca √ßok g√ºzel. ‚ú®",
        photos: ["images/yeni-yil.png"],
        quiz: {
          question: "Yeni yƒ±l ka√ß? (cevap: 2026)",
          answers: ["2026"]
        }
      }
    };

    (function init() {
      // TEST: ayd√∂n√ºm√º g√ºn√º
      const today = new Date(2025, 11, 12);
      // Ger√ßek kullanƒ±mda:
      // const today = new Date();

      const todayDateOnly = new Date(
        today.getFullYear(),
        today.getMonth(),
        today.getDate()
      );

      const seasonStart = new Date(SEASON_YEAR, 10, 30); // 30 Kasƒ±m
      const seasonEnd = new Date(SEASON_YEAR + 1, 0, 1); // 1 Ocak

      const statusEl = document.getElementById("status");
      const noteSection = document.getElementById("note-section");
      const noteTitleEl = document.getElementById("note-title");
      const noteTextEl = document.getElementById("note-text");
      const photosEl = document.getElementById("photos");
      const dayPillEl = document.getElementById("day-pill");
      const rangeTextEl = document.getElementById("range-text");
      const quizArea = document.getElementById("quiz-area");
      const quizQuestionEl = document.getElementById("quiz-question");
      const quizAnswerInput = document.getElementById("quiz-answer");
      const quizSubmitBtn = document.getElementById("quiz-submit");
      const quizFeedbackEl = document.getElementById("quiz-feedback");
      const cardEl = document.querySelector(".card");
      const dayCounterEl = document.getElementById("day-counter");

      // Takvim aralƒ±ƒüƒ±
      rangeTextEl.textContent = `30 Kasƒ±m ${SEASON_YEAR} ‚Äì 1 Ocak ${
        SEASON_YEAR + 1
      }`;

      // K√º√ß√ºk pill (g√∂r√ºnm√ºyor ama bilgi olsun)
      if (dayPillEl) {
        dayPillEl.children[0].textContent = "Bug√ºn";
        dayPillEl.children[1].textContent = today.toLocaleDateString("tr-TR", {
          day: "2-digit",
          month: "2-digit"
        });
      }

      // Ka√ßƒ±ncƒ± sayfa (takvimde kullanƒ±lƒ±yor)
      const idx =
        Math.floor((todayDateOnly - seasonStart) / (1000 * 60 * 60 * 24)) + 1;

      // Aylƒ±k takvimi √ßiz
      renderCalendar(todayDateOnly, idx);

      // ƒ∞li≈üki g√ºn sayacƒ±
      if (dayCounterEl) {
        const startDateOnly = new Date(
          RELATION_START.getFullYear(),
          RELATION_START.getMonth(),
          RELATION_START.getDate()
        );
        const diffMs = todayDateOnly - startDateOnly;
        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24)) + 1;

        if (diffDays > 0) {
          dayCounterEl.textContent = `${diffDays}. g√ºn√ºm√ºz üí´`;
        }
      }

      // Sezon ba≈ülamadƒ± / bitti mi?
      if (todayDateOnly < seasonStart) {
        statusEl.textContent =
          "Takvimimiz hen√ºz ba≈ülamadƒ±. ƒ∞lk not 30 Kasƒ±m'da a√ßƒ±lacak. üíå";
        return;
      }

      if (todayDateOnly > seasonEnd) {
        statusEl.textContent =
          "Bu k√º√ß√ºk takvim g√∂revini tamamladƒ±. Umarƒ±m her sayfasƒ± seni g√ºl√ºmsetmi≈ütir. ‚ú®";
        return;
      }

      // BUG√úN√úN ENTRY'Sƒ∞
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, "0");
      const day = String(today.getDate()).padStart(2, "0");
      const key = `${year}-${month}-${day}`;
      const entry = entries[key];

      if (!entry) {
        statusEl.textContent =
          "Bug√ºn i√ßin not hen√ºz eklenmemi≈ü gibi g√∂r√ºn√ºyor. (Bu kƒ±smƒ± sen hazƒ±rlarken g√∂r√ºyorsun üíª)";
        return;
      }

      // Ba≈üta gizli
      noteSection.hidden = true;

      // Notu ekrana basan fonksiyon
      function renderEntryContent() {
        noteSection.hidden = false;
        noteTitleEl.textContent = entry.title || `G√ºn ${idx}`;
        noteTextEl.textContent = entry.text || "";

        photosEl.innerHTML = "";
        if (Array.isArray(entry.photos) && entry.photos.length > 0) {
          entry.photos.forEach((src) => {
            const wrapper = document.createElement("div");
            wrapper.className = "photo";
            const img = document.createElement("img");
            img.src = src;
            img.alt = "Bug√ºne ait bir fotoƒüraf";
            wrapper.appendChild(img);
            photosEl.appendChild(wrapper);
          });
        }
      }

      // Konfeti + ses (sadece G√∂ster sonrasƒ±)
      function triggerAnniversaryEffects() {
        if (!entry.isAnniversary) return;

        if (cardEl) {
          cardEl.classList.add("anniversary");
        }

        const sound = document.getElementById("confetti-sound");
        if (sound) {
          sound.currentTime = 0;
          sound.play().catch((err) => {
            console.log("confetti sound blocked:", err);
          });
        }

        if (window.confetti) {
          const duration = 3000;
          const end = Date.now() + duration;

          (function frame() {
            confetti({
              particleCount: 5,
              spread: 80,
              origin: { x: Math.random(), y: 0.3 }
            });
            if (Date.now() < end) requestAnimationFrame(frame);
          })();
        }
      }

      // Quiz varsa
      if (
        entry.quiz &&
        entry.quiz.question &&
        quizArea &&
        quizQuestionEl &&
        quizSubmitBtn &&
        quizAnswerInput &&
        quizFeedbackEl
      ) {
        quizArea.hidden = false;
        quizQuestionEl.textContent = entry.quiz.question;
        quizAnswerInput.value = "";
        quizFeedbackEl.textContent = "";

        const acceptedAnswers = (entry.quiz.answers || []).map((a) =>
          String(a).toLowerCase().trim()
        );

        quizSubmitBtn.onclick = function () {
          const user = quizAnswerInput.value.toLowerCase().trim();
          if (!user) {
            quizFeedbackEl.textContent = "Azƒ±cƒ±k d√º≈ü√ºn, bir ≈üeyler yaz. üí≠";
            return;
          }

          if (acceptedAnswers.includes(user)) {
            quizFeedbackEl.textContent =
              "TAM ƒ∞SABET! Bug√ºn√ºn sayfasƒ± senin. üíñ";
            renderEntryContent();
            triggerAnniversaryEffects();
          } else {
            quizFeedbackEl.textContent =
              "Bence bir daha d√º≈ü√ºn. K√º√ß√ºk bir ipucu: anƒ±lar. üòâ";
          }
        };
      } else {
        // Quiz yoksa direkt g√∂ster
        renderEntryContent();
      }
    })();

    // TAKVƒ∞M √áƒ∞Zƒ∞Cƒ∞
    function renderCalendar(todayDateOnly, idx) {
      const root = document.getElementById("calendar-root");
      if (!root) return;

      const monthNames = [
        "Ocak","≈ûubat","Mart","Nisan","Mayƒ±s","Haziran",
        "Temmuz","Aƒüustos","Eyl√ºl","Ekim","Kasƒ±m","Aralƒ±k"
      ];

      const year = todayDateOnly.getFullYear();
      const month = todayDateOnly.getMonth();

      const first = new Date(year, month, 1);
      const last = new Date(year, month + 1, 0);

      // Pazartesi ilk s√ºtun
      const firstWeekday = (first.getDay() + 6) % 7; // Pzt=0 ... Paz=6
      const totalDays = last.getDate();

      let html = `
        <div class="calendar-box">
          <div class="calendar-header">
            <span class="calendar-month">${monthNames[month]} ${year}</span>
            <span class="calendar-counter">${idx}. g√ºn√ºm√ºz ü•¨</span>
          </div>
          <div class="calendar-grid">
            <div class="calendar-weekday">Pzt</div>
            <div class="calendar-weekday">Sal</div>
            <div class="calendar-weekday">√áar</div>
            <div class="calendar-weekday">Per</div>
            <div class="calendar-weekday">Cum</div>
            <div class="calendar-weekday">Cmt</div>
            <div class="calendar-weekday">Paz</div>
      `;

      // Bo≈ü h√ºcreler
      for (let i = 0; i < firstWeekday; i++) {
        html += `<div class="calendar-day empty"></div>`;
      }

      const todayDay = todayDateOnly.getDate();

      for (let d = 1; d <= totalDays; d++) {
        const isToday = d === todayDay;
        const cls = "calendar-day" + (isToday ? " today" : "");
        html += `<div class="${cls}">${d}</div>`;
      }

      html += `</div></div>`;
      root.innerHTML = html;
    }
  </script>

  <script>
    (function setupPreview() {
      const hasPreviewHash = window.location.hash === "#preview";
      if (!hasPreviewHash) return;

      const statusEl = document.getElementById("status");
      const noteSection = document.getElementById("note-section");
      const noteTitleEl = document.getElementById("note-title");
      const noteTextEl = document.getElementById("note-text");
      const photosEl = document.getElementById("photos");
      const dayPillEl = document.getElementById("day-pill");
      const quizArea = document.getElementById("quiz-area");

      if (
        !statusEl ||
        !noteSection ||
        !noteTitleEl ||
        !noteTextEl ||
        !photosEl ||
        !dayPillEl
      ) {
        return;
      }

      if (quizArea) quizArea.hidden = true;

      dayPillEl.children[0].textContent = "√ñnizleme";
      dayPillEl.children[1].textContent = "T√ºm g√ºnler";

      statusEl.textContent =
        "√ñnizleme modu: A≈üaƒüƒ±dan bir tarih se√ßip o g√ºne yazdƒ±ƒüƒ±n notu g√∂rebilirsin.";

      const previewBar = document.createElement("div");
      previewBar.style.marginTop = "10px";
      previewBar.style.display = "flex";
      previewBar.style.gap = "8px";
      previewBar.style.alignItems = "center";
      previewBar.style.fontSize = "0.85rem";

      const label = document.createElement("label");
      label.textContent = "G√ºn se√ß:";

      const select = document.createElement("select");
      select.style.flex = "1";

      if (typeof entries !== "undefined") {
        const keys = Object.keys(entries || {}).sort();

        keys.forEach((key) => {
          const option = document.createElement("option");
          option.value = key;

          const d = new Date(key);
          if (!isNaN(d)) {
            option.textContent = d.toLocaleDateString("tr-TR", {
              day: "2-digit",
              month: "2-digit"
            });
          } else {
            option.textContent = key;
          }

          select.appendChild(option);
        });

        previewBar.appendChild(label);
        previewBar.appendChild(select);
        statusEl.appendChild(previewBar);

        function renderEntry(dateKey) {
          const entry = entries[dateKey];
          if (!entry) return;

          noteSection.hidden = false;
          noteTitleEl.textContent = entry.title || "";
          noteTextEl.textContent = entry.text || "";

          photosEl.innerHTML = "";
          if (Array.isArray(entry.photos) && entry.photos.length > 0) {
            entry.photos.forEach((src) => {
              const wrapper = document.createElement("div");
              wrapper.className = "photo";
              const img = document.createElement("img");
              img.src = src;
              img.alt = "Bug√ºne ait bir fotoƒüraf";
              wrapper.appendChild(img);
              photosEl.appendChild(wrapper);
            });
          }
        }

        if (keys.length > 0) {
          renderEntry(keys[0]);
        }

        select.addEventListener("change", function () {
          renderEntry(this.value);
        });
      }
    })();
  </script>

  <script>
    (function setupMusic() {
      const audio = document.getElementById("bg-music");
      const toggle = document.getElementById("music-toggle");
      const volume = document.getElementById("music-volume");

      if (!audio || !toggle || !volume) return;

      audio.volume = 0.2;

      toggle.addEventListener("click", () => {
        if (audio.paused) {
          audio.play().catch(() => {});
          toggle.textContent = "‚è∏";
        } else {
          audio.pause();
          toggle.textContent = "‚ñ∂";
        }
      });

      volume.addEventListener("input", () => {
        audio.volume = Number(volume.value);
      });
    })();
  </script>
</body>
</html>
